@page "/"
@inject WorkoutApi Api
@inject NavigationManager Nav

<h1 class="page-title">Workouts Tygo</h1>
<p class="page-subtitle">Choose a 100-day Workout</p>

@if (Plans == null)
{
    <div class="skeleton-grid"></div>
    <p>No plans</p>
}
else
{
    <div class="grid">
        @foreach (var plan in Plans)
        {
            <div class="card" @onclick="() => Go(plan.Id)">
                <h3>@plan.Name</h3>
                <p>@plan.TargetReps reps · 100 days</p>
            </div>
        }
    </div>
}

@code {
    List<WorkoutPlanDto>? Plans;

    protected override async Task OnInitializedAsync()
    {
        Plans = await Api.GetPlans();
    }

    void Go(int id)
    {
        Nav.NavigateTo($"/plan/{id}");
    }
}
